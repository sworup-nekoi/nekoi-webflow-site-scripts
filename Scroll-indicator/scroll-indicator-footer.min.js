(function(){function e(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e,{once:!0})}window.__scrollIndicatorsInit||(window.__scrollIndicatorsInit=!0,e(function(){function e(){return window.visualViewport&&window.visualViewport.height||window.innerHeight||l.clientHeight}function t(){return Math.max(u.scrollHeight,l.scrollHeight,document.body?document.body.scrollHeight:0)}function n(){return("number"==typeof window.scrollY?window.scrollY:u.scrollTop)||0}function o(){m=Array.from(document.querySelectorAll(".indicator-wrapper"))}function i(){const o=n(),i=e(),r=t(),s=Math.max(1,r-i),d=3;return s-o<=d||o>=s}function r(e){const t=e.querySelector(".indicator-top-wrapper");if(!t)return;const n=Array.from(e.querySelectorAll(".indicator")).find(e=>!t.contains(e));if(!n)return;const o=e.classList.contains("is-at-end");o&&e.classList.remove("is-at-end");const i=t.getBoundingClientRect(),r=n.getBoundingClientRect();let s;const d=Array.from(t.querySelectorAll(".indicator"));d.length?(s=d.reduce((e,t)=>{const n=t.getBoundingClientRect();return Math.max(e,n.bottom)},-1/0),Number.isFinite(s)||(s=i.bottom)):s=i.bottom;const c=r.top,a=Math.max(1,Math.round(window.devicePixelRatio||1)),l=e=>Math.round(e*a)/a,u=c-s,m=Math.max(0,l(u));o&&e.classList.add("is-at-end"),e.style.setProperty("--ind-merge-shift",`${m}px`),e.style.setProperty("--ind-merge-shift-top",`${m}px`),e.style.setProperty("--ind-merge-shift-bottom","0px")}function s(){m.forEach(r)}function d(){const e=i();m.forEach(t=>t.classList.toggle("is-at-end",e))}function c(){w||(w=!0,requestAnimationFrame(()=>{w=!1,s(),d()}))}function a(){o(),c(),setTimeout(c,50),setTimeout(c,200)}const l=document.documentElement,u=document.scrollingElement||document.documentElement;let m=[],w=!1;if(a(),window.ResizeObserver){const e=new ResizeObserver(()=>a());e.observe(document.documentElement),document.body&&e.observe(document.body)}window.addEventListener("resize",a,{passive:!0}),window.addEventListener("orientationchange",a,{passive:!0}),window.addEventListener("load",a,{passive:!0}),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&a()}),window.visualViewport&&(visualViewport.addEventListener("resize",a,{passive:!0}),visualViewport.addEventListener("scroll",a,{passive:!0})),window.addEventListener("scroll",()=>{d()},{passive:!0}),document.fonts&&document.fonts.ready&&document.fonts.ready.then(a).catch(()=>{}),document.addEventListener("spa:ready",a),window.ScrollIndicators=window.ScrollIndicators||{},window.ScrollIndicators.refresh=a}))})();