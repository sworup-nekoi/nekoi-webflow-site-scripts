(function(){function t(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t,{once:!0})}window.__scrollIndicatorsInit||(window.__scrollIndicatorsInit=!0,t(function(){function t(){return window.visualViewport&&window.visualViewport.height||window.innerHeight||l.clientHeight}function e(){return Math.max(u.scrollHeight,l.scrollHeight,document.body?document.body.scrollHeight:0)}function n(){return("number"==typeof window.scrollY?window.scrollY:u.scrollTop)||0}function o(){m=Array.from(document.querySelectorAll(".indicator-wrapper"))}function i(){const o=n(),i=t(),r=e(),s=Math.max(1,r-i),c=3;return s-o<=c||o>=s}function r(t){function e(t){const e=Array.from(t.querySelectorAll("*"));if(!e.length)return null;let n=1/0;const o=[];for(const t of e){const e=t.getBoundingClientRect(),i=e.height;i>0&&(o.push(e),i<n&&(n=i))}if(!o.length||!Number.isFinite(n))return null;const i=1.1*n,r=o.filter(t=>t.height<=i);return{topMin:Math.min.apply(null,r.map(t=>t.top)),bottomMax:Math.max.apply(null,r.map(t=>t.bottom))}}const n=t.querySelector(".indicator-top-wrapper");if(!n)return;const o=Array.from(t.querySelectorAll(".indicator")).find(t=>!n.contains(t));if(!o)return;const i=t.classList.contains("is-at-end");i&&t.classList.remove("is-at-end");const r=n.getBoundingClientRect(),s=o.getBoundingClientRect(),c=e(n),d=e(o),a=c?c.bottomMax:r.bottom;let l=d?d.topMin:s.top;const u=Math.max(1,Math.round(window.devicePixelRatio||1)),m=t=>Math.round(t*u)/u,w=l-a,p=Math.max(0,m(w));i&&t.classList.add("is-at-end"),t.style.setProperty("--ind-merge-shift",`${p}px`),t.style.setProperty("--ind-merge-shift-top",`${p}px`),t.style.setProperty("--ind-merge-shift-bottom","0px")}function s(){m.forEach(r)}function c(){const t=i();m.forEach(e=>e.classList.toggle("is-at-end",t))}function d(){w||(w=!0,requestAnimationFrame(()=>{w=!1,s(),c()}))}function a(){o(),d(),setTimeout(d,50),setTimeout(d,200)}const l=document.documentElement,u=document.scrollingElement||document.documentElement;let m=[],w=!1;if(a(),window.ResizeObserver){const t=new ResizeObserver(()=>a());t.observe(document.documentElement),document.body&&t.observe(document.body)}window.addEventListener("resize",a,{passive:!0}),window.addEventListener("orientationchange",a,{passive:!0}),window.addEventListener("load",a,{passive:!0}),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&a()}),window.visualViewport&&(visualViewport.addEventListener("resize",a,{passive:!0}),visualViewport.addEventListener("scroll",a,{passive:!0})),window.addEventListener("scroll",()=>{c()},{passive:!0}),document.fonts&&document.fonts.ready&&document.fonts.ready.then(a).catch(()=>{}),document.addEventListener("spa:ready",a),window.ScrollIndicators=window.ScrollIndicators||{},window.ScrollIndicators.refresh=a}))})();