(function(){function e(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e,{once:!0})}window.__scrollIndicatorsInit||(window.__scrollIndicatorsInit=!0,e(function(){function e(){return window.visualViewport&&window.visualViewport.height||window.innerHeight||w.clientHeight}function t(){return Math.max(f.scrollHeight,w.scrollHeight,document.body?document.body.scrollHeight:0)}function n(){return("number"==typeof window.scrollY?window.scrollY:f.scrollTop)||0}function o(){p=Array.from(document.querySelectorAll(".indicator-wrapper"))}function i(){const o=n(),i=e(),r=t(),s=Math.max(1,r-i),c=3;return s-o<=c||o>=s}function r(e){const t=e.querySelector(".indicator-top-wrapper");if(!t)return;const n=Array.from(e.querySelectorAll(".indicator")).find(e=>!t.contains(e));if(!n)return;const o=e.classList.contains("is-at-end");o&&e.classList.remove("is-at-end");const i=t.getBoundingClientRect(),r=n.getBoundingClientRect(),s=i.bottom,c=r.top,d=Math.max(1,Math.round(window.devicePixelRatio||1)),a=e=>Math.round(e*d)/d,l=c-s,u=Math.max(0,a(l/2));o&&e.classList.add("is-at-end"),e.style.setProperty("--ind-merge-shift",`${u}px`)}function s(){p.forEach(r)}function c(e){const t=e.querySelector(".indicator-top-wrapper");if(!t)return;const n=Array.from(e.querySelectorAll(".indicator")).find(e=>!t.contains(e));if(!n)return;if(!e.classList.contains("is-at-end"))return;const o=Math.max(1,Math.round(window.devicePixelRatio||1)),i=e=>Math.round(e*o)/o,r=.5/o,s=getComputedStyle(e),c=parseFloat(s.getPropertyValue("--ind-merge-shift"))||0,d=t.getBoundingClientRect().bottom,a=n.getBoundingClientRect().top,l=a-d;if(Math.abs(l)<=r)return;const u=i(c+l/2);e.style.setProperty("--ind-merge-shift",`${u}px`)}function d(){p.forEach(c)}function a(){if(!document.body)return;let e=document.getElementById("scroll-end-sentinel-js");if(e||(e=document.createElement("div"),e.id="scroll-end-sentinel-js",e.style.cssText="height:1px;width:1px;",document.body.appendChild(e)),"IntersectionObserver"in window){function t(){try{const e=getComputedStyle(document.documentElement),t=(e.getPropertyValue("--safe-bottom")||"0px").trim(),n=parseFloat(t);return Number.isFinite(n)?n:0}catch(e){return 0}}y&&y.disconnect();const n=Math.max(1,Math.round(t())+1);try{y=new IntersectionObserver(e=>{const t=e[0];t&&(v=!!t.isIntersecting,l())},{rootMargin:`0px 0px ${n}px 0px`,threshold:.999}),y.observe(e)}catch(e){console.warn("IntersectionObserver init failed; falling back",e),y=null}}}function l(){const e=v||i();e&&!h&&s(),p.forEach(t=>t.classList.toggle("is-at-end",e)),e&&(clearTimeout(l._t),l._t=setTimeout(()=>{d()},320)),h=e}function u(){g||(g=!0,requestAnimationFrame(()=>{g=!1,s(),l()}))}function m(){o(),a(),u(),setTimeout(u,50),setTimeout(u,200)}const w=document.documentElement,f=document.scrollingElement||document.documentElement;let p=[],h=!1,v=!1,y=null,g=!1;if(m(),window.ResizeObserver){const e=new ResizeObserver(()=>m());e.observe(document.documentElement),document.body&&e.observe(document.body)}window.addEventListener("resize",m,{passive:!0}),window.addEventListener("orientationchange",m,{passive:!0}),window.addEventListener("load",m,{passive:!0}),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&m()}),window.visualViewport&&(visualViewport.addEventListener("resize",m,{passive:!0}),visualViewport.addEventListener("scroll",m,{passive:!0})),window.addEventListener("scroll",()=>{l()},{passive:!0}),document.fonts&&document.fonts.ready&&document.fonts.ready.then(m).catch(()=>{}),document.addEventListener("spa:ready",m),window.ScrollIndicators=window.ScrollIndicators||{},window.ScrollIndicators.refresh=m}))})();