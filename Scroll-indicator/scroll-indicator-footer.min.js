(function(){function e(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e,{once:!0})}window.__scrollIndicatorsInit||(window.__scrollIndicatorsInit=!0,e(function(){function e(){return window.visualViewport&&window.visualViewport.height||window.innerHeight||u.clientHeight}function t(){return Math.max(m.scrollHeight,u.scrollHeight,document.body?document.body.scrollHeight:0)}function n(){return("number"==typeof window.scrollY?window.scrollY:m.scrollTop)||0}function o(){w=Array.from(document.querySelectorAll(".indicator-wrapper"))}function i(){const o=n(),i=e(),r=t(),s=Math.max(1,r-i),c=3;return s-o<=c||o>=s}function r(e){const t=e.querySelector(".indicator-top-wrapper");if(!t)return;const n=Array.from(e.querySelectorAll(".indicator")).find(e=>!t.contains(e));if(!n)return;const o=e.classList.contains("is-at-end");o&&e.classList.remove("is-at-end");const i=t.getBoundingClientRect(),r=n.getBoundingClientRect(),s=(i.top+i.bottom)/2,c=(r.top+r.bottom)/2,d=e=>Math.round(2*e)/2,a=Math.max(0,d((c-s)/2));o&&e.classList.add("is-at-end"),e.style.setProperty("--ind-merge-shift",`${a}px`)}function s(){w.forEach(r)}function c(){if(!document.body)return;let e=document.getElementById("scroll-end-sentinel-js");if(e||(e=document.createElement("div"),e.id="scroll-end-sentinel-js",e.style.cssText="height:1px;width:1px;",document.body.appendChild(e)),"IntersectionObserver"in window){function t(){try{const e=getComputedStyle(document.documentElement),t=(e.getPropertyValue("--safe-bottom")||"0px").trim(),n=parseFloat(t);return Number.isFinite(n)?n:0}catch(e){return 0}}f&&f.disconnect();const n=Math.max(1,Math.round(t())+1);try{f=new IntersectionObserver(e=>{const t=e[0];t&&(p=!!t.isIntersecting,d())},{rootMargin:`0px 0px ${n}px 0px`,threshold:.999}),f.observe(e)}catch(e){console.warn("IntersectionObserver init failed; falling back",e),f=null}}}function d(){const e=p||i();w.forEach(t=>t.classList.toggle("is-at-end",e))}function a(){v||(v=!0,requestAnimationFrame(()=>{v=!1,s(),d()}))}function l(){o(),c(),a(),setTimeout(a,50),setTimeout(a,200)}const u=document.documentElement,m=document.scrollingElement||document.documentElement;let w=[],p=!1,f=null,v=!1;if(l(),window.ResizeObserver){const e=new ResizeObserver(()=>l());e.observe(document.documentElement),document.body&&e.observe(document.body)}window.addEventListener("resize",l,{passive:!0}),window.addEventListener("orientationchange",l,{passive:!0}),window.addEventListener("load",l,{passive:!0}),document.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&l()}),window.visualViewport&&(visualViewport.addEventListener("resize",l,{passive:!0}),visualViewport.addEventListener("scroll",l,{passive:!0})),window.addEventListener("scroll",()=>{d()},{passive:!0}),document.fonts&&document.fonts.ready&&document.fonts.ready.then(l).catch(()=>{}),document.addEventListener("spa:ready",l),window.ScrollIndicators=window.ScrollIndicators||{},window.ScrollIndicators.refresh=l}))})();